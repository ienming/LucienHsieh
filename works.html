<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PTFLO: projects</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <main id="app">
        <my-header :is-scroll-down="isScrollDown" @mobile-is-open="mobileIsOpen" @mobile-is-close="mobileIsClose"></my-header>

        <main style="overflow: hidden;">
            <!-- Content -->
            <section class="row mb-0 mt-5">
                <div class="col-12 pl-1 pl-md-5">
                    <h1 class="t-display mt-0 mt-md-5 mb-2 mb-lg-1">
                        <div class="anim-highlight">
                            <span class="t-title-2">Works</span></br>
                            <span class="t-title-1">作品</span>
                        </div>
                    </h1>
                </div>
                <!-- All works -->
                <div class="col-12 mb-2 px-1 px-md-5">
                    <drop-down :lists="cate" :title="nowCate" @drop-click="switchCate" class="w-100 w-md-50"></drop-down>
                </div>
                <transition-group class="col-12 row" name="fade">
                    <cover-enter-point
                        class="col-12 col-sm-6 col-md-4 col-3xl-3"
                        v-for="work of filteredWorks"
                        newTab="false"
                        :url="work.url"
                        :cover-img="work.img"
                        :cover-title="work.name"
                        :cover-hashtags="work.hashtags"
                        :cover-des="work.date"
                        :key="work.name">
                    </cover-enter-point>
                </transition-group>
            </section>
        </main>

        <!-- Footer -->
        <my-footer></my-footer>
    </main>

    <!-- GSAP -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.js' integrity='sha512-NbdYutU8SqxAdwkioXbsw2Tr3jbPA1LCB3aQj/LkIshNnMMggYViEafkDdazPtAYklypxdjPfeG12OATLwZlnQ==' crossorigin='anonymous'></script>

    <!-- Vue -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.14/vue.common.dev.min.js" integrity="sha512-TpgbLHXaTCAZ7ULhjopb1PveTz5Jx6KEQUtMfXhV0m0EArh+6O8ybZjjDN1Yug6oagN6iFm6EoMjuYSiFr0qXQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="assets/js/components.js"></script>
    <script>
        const vm = new Vue({
            el: "#app",
            data:{
                isScrollDown: false,
                lastScrollTop: 0,
                mobileMenuOpen: false,
                nowCate: "全部 All",
                cate: [
                    {
                        content: "全部 All"
                    },{
                        content: "設計 Design"
                    },{
                        content: "程式 Code"
                    },{
                        content: "繪畫 Painting"
                    }
                ],
                works: [
                    {
                        name: "Modern Love",
                        hashtags: ["data visualization", "p5.js"],
                        date: "2021",
                        img: "./assets/img/pj_modern_love/cover.png",
                        url: "pj_modern_love.html",
                        tags: ['design', 'code']
                    },{
                        name: "Snail Oasis",
                        hashtags: ["gamification", "PIXI.js"],
                        date: "2022",
                        img: "./assets/img/pj_snail_oasis/cover.png",
                        url: "pj_snail_oasis.html",
                        tags: ['design', 'code']
                    },{
                        name: "阿里山摺頁設計",
                        hashtags: ["graphic design", "pamphlet"],
                        date: "2021",
                        img: "./assets/img/pj_alishan_pamphlet_design/cover.png",
                        url: "pj_alishan.html",
                        tags: ['design']
                    },{
                        name: "Sushillustration",
                        hashtags: ["illustration"],
                        date: "2019",
                        img: "./assets/img/pj_sushillustration/cover.png",
                        url: "pj_sushillustration.html",
                        tags: ['painting']
                    }
                ]
            },
            computed: {
                filteredWorks(){
                    let nowFilter = this.nowCate.split(' ')[1].toLowerCase()
                    if (nowFilter !== 'all'){
                        return this.works.filter(work => work.tags.includes(nowFilter) )
                    }else {
                        return this.works
                    }
                }
            },
            methods: {
                scrollDirect(){
                    let st = window.pageYOffset || document.documentElement.scrollTop
                    if (!this.mobileMenuOpen){
                        if (st > this.lastScrollTop){
                            this.isScrollDown = true
                        } else {
                            this.isScrollDown = false
                        }
                    }else{
                        let deltaY = st - this.lastScrollTop
                        TweenMax.to(".scroll", .5, {
                            y: "-="+ deltaY*3 + "px"
                        })
                    }
                    this.lastScrollTop = st <= 0 ? 0 : st
                },
                mobileIsOpen(){
                    this.mobileMenuOpen = true
                },
                mobileIsClose(){
                    this.mobileMenuOpen = false
                },
                switchCate(el){
                    this.nowCate = el
                }
            },
            created(){
                window.addEventListener('scroll', this.scrollDirect);
            },
            destroyed(){
                window.removeEventListener('scroll', this.scrollDirect);
            }
        })
    </script>
</body>
</html>